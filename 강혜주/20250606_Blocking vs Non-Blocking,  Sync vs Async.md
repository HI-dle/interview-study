
## Blocking / NonBlocking

>제어권이 누구에게 있는지의 차이

### Blocking

블로킹은 자신의 작업을 진행하다가 다른 주체의 작업이 시작되면 그 작업이 끝날때까지 기다렸다가 자신의 작업을 다시 시작하는 방식이다. 즉 다른 작업 때문에 '나'의 제어권이 넘어간 상태라고 볼 수 있다.

예를들면, 호출된 함수(B)가 자신이 할 일을 모두 마칠 때까지 제어권을 계속 가지고서 호출한 함수(A) 에게 돌려주지 않는 것을 말한다.

![](https://velog.velcdn.com/images/hyezuu/post/174b71ba-8a05-4a99-bac3-c053d24b2dc1/image.png)

- 함수 A와 함수 B가 있고, A가 B를 호출하는 경우
- 초기 제어권은 A에게 있지만, B를 호출하면서 제어권을 넘겨주게 되고, B의 종료와 함께 제어권을 돌려받게 된다.
- 제어권을 돌려받은 A는 B호출이후의 코드를 실행할 수 있다.

- 서류를 상사에게 전달했을 때, 상사가 서류를 다 읽을 때까지 직원이 아무 일도 못하고 기다리는 것


### Non-Blocking

논블로킹은 다른 주체의 작업에 관련 없이 자신의 작업을 계속 진행하는 방식을 말한다.
즉 다른 작업이 시작되어도 '나'의 제어권은 그대로 가지고 자신의 일을 한다.

예를들면, 호출된 함수(B)가 자신이 할 일을 마치지 않았더라도 제어권을 다시 건네주어 (return) 호출한 함수(A)가 다른 일을 진행할 수 있도록 해주는 것을 말한다.

![](https://velog.velcdn.com/images/hyezuu/post/567a048f-8645-403d-b184-2d4c909d624c/image.png)

- 함수 A와 함수 B가 있고, A가 B를 호출하는 경우
- 초기 제어권은 A에게 있고,  B를 호출하면서 제어권을 넘겨주게 되지만 거의 즉시 제어권을 반환받아 남은 작업을 수행할 수 있다.

- 상사에게 서류를 전달하고, 직원은 자신의 자리로 돌아가 다른 일을 하는 것

>블로킹과 논블로킹은 다른 작업이 수행될 때 '나'의 작업(또는 제어권)이 멈추는지 계속되는지의 관점

## Sync / Async

>함수의 종료, 결과 값의 전달을 함께하느냐의 차이 (하나의 코드에 시간을 함께 하는지)

### Synchronous(동기)

Synschronous 는 작업을 동시에 수행하거나, 동시에 끝나거나, 끝나는 동시에 다음 작업이 시작되는 방식을 말한다.
즉, 요청한 작업의 결과를 받으면 바로 이어서 다음 업무를 처리하는 것을 의미한다.
(함수의 결과와 결과의 전달이 일치하는 것)

예를들면 호출된 함수(B)의 수행 결과 및 종료를 호출한 함수(A)가 신경쓰고 있는 것

![](https://velog.velcdn.com/images/hyezuu/post/f34681ef-9cca-4f67-a7c3-85248b052629/image.png)


- B 함수가 종료되는 시점에 A에게 결과가 즉시 전달된다.
- A는 B가 끝나길 기다리고있다가 결과를 받자마자 즉시 다음 업무를 처리하는 것.

- 상사에게 서류를 전달하고 결과를 받자마자 즉시 다음 업무를 처리하는 것

### Asynchronous(비동기)

어싱크는 시작과 종료가 일치하지 않으며, 끝나는 동시에 시작하지 않는 방식을 말한다.
즉 요청한 작업의 결과에 크게 비중을 두지 않고 자신의 할 일을 계속하다가, 나중에 결과가 돌아오면 그때 처리하거나 처리하지 않을 수도 있다.
(함수의 결과와 결과의 전달이 일치하지 않는 것)

예를 들면 호출된 함수(B)의 수행 결과 및 종료를 호출된 함수(B) 혼자 직접 신경 쓰고 처리하는것

![](https://velog.velcdn.com/images/hyezuu/post/366ba550-d382-4460-8a8a-829fb17b3d09/image.png)


- A는 B를 호출한 이후에 그 결과에 관심을 가지지 않고 자신의 일을 한다.
- 필요한 시점에 그 응답을 가져올수도있다.

상사에게 서류를 전달하고 상사가 메일로 결과를 보내주면, 직원은 나중에 시간이 될 때 메일을 확인하고 처리하는 것

## 가능한 조합들

![](https://velog.velcdn.com/images/hyezuu/post/46c8dd36-275e-45b3-a91a-a209b86f8c96/image.png)


### Blocking & Synchronous

다른 작업이 끝날 때 까지 기다렸다가(blocking) , 결과가 오면 즉시 처리하는 방식

- 제어권 관점 : 다른 작업 중에는 제어권이 없어 동작하지 않는다. (Blocking)
- 결과, 순서 관점 : 결과를 받아서 이후 업무를 처리한다 (sync)

- 코드가 순차적으로 실행되는 특성을 가지고있다. 만약 호출하는 함수 B가 오래걸리는 작업이라면 전체 처리 시간이 오래걸리게 되어 비효율 적이게 된다.

예시:

> ☕ 카페에서 아메리카노 주문 (일반 카페)\
나: "아메리카노 하나 주세요"\
바리스타: "네, 잠깐만 기다려 주세요"\
나: (카운터 앞에서 커피가 나올 때까지 가만히 서서 기다림)\
바리스타: "아메리카노 나왔습니다"\
나: 커피를 받고 바로 자리로 이동해서 마시기 시작\

### Non-Blocking & Synchronous

다른 일을 하면서(non-blocking) 중간중간 요청이 끝났는지 확인하고(sync) 끝나면 결과를 가져와 처리하는 방식
결과가 나올 때 까지 반복적으로 물어보는 polling 방식

- 제어권 관점 : 다른 작업 중에도 자신의 제어권을 가지고 작업을 수행한다 (non-blocking)
- 결과, 순서 관점 : 결과에 관심이 많아 결과가 오면 바로 처리해야한다 (sync)

- polling 방식에 주로 사용된다.

예시:

> ☕ 카페에서 아메리카노 주문 (진동벨 없는 카페)\
나: "아메리카노 하나 주세요"\
바리스타: "네, 자리에서 기다리세요"\
나: 자리에 앉아서 폰을 보다가...\
나: (2분 후) "아메리카노 나왔나요?" 확인\
바리스타: "아직이요"\
나: (1분 후) "아메리카노 나왔나요?" 확인\
바리스타: "아직이요"\
나: (1분 후) "아메리카노 나왔나요?" 확인\
바리스타: "지금 나왔어요!"\
나: 커피 받자마자 바로 마시기 시작\

## Blocking & Asynchronous

다른 작업이 끝날 때까지 기다리지만(blocking), 결과는 바로 처리하지 않고 나중에 처리(async)하는 방식

- 제어권 관점 : 다른 작업 중에는 제어권이 없어 동작하지 않는다 (blocking)
- 결과, 순서 관점 : 결과에 별로 관심없고 나중에 처리해도 된다. (async)

- 실제로 잘 보게될 일이 없는 듯 하다. 안티패턴이라고 치부하는 경우가 많다.

예시:

> ☕ 카페에서 아메리카노 주문 (이상한 상황)\
나: "아메리카노 하나 주세요"\
바리스타: "여기서 기다리세요" (자리 이동 불가)\
나: (카운터 앞에서 아무것도 못하고 멍하니 기다림)\
바리스타: "아메리카노 나왔습니다"\
나: "아, 네... 나중에 마실게요" (별로 관심 없음)\

## Non-blocking & Asynchronous

다른 작업이 시작되어도 자신의 작업을 계속하며 (non-blocking), 요청한 작업의 결과는 즉시 처리하지 않고 나중에 처리하는 방식(async)

- 제어권 관점 : 다른 작업 중에도 자신의 작업을 멈추지않는다. (non-blocking)
- 결과, 순서 관점 : 결과에 별로 관심없고 나중에 처리해도 된다. (async)

- 작업량이 많거나 시간이 오래걸리는 작업을 처리해야 하는 경우에 적합하다.

예시:

> ☕ 카페에서 아메리카노 주문 (모던 카페)\
>나: "아메리카노 하나 주세요"\
바리스타: "진동벨 드릴게요, 자리에서 편히 계세요"\
나: 자리에 앉아서 업무, 독서, 대화 등 다른 일에 집중\
진동벨: (나중에 조용히) 울림\
나: 할 일이 어느 정도 끝나면 커피 가져와서 마시거나, 바쁘면 나중에\

참고

[완벽히 이해하는 동기/비동기 & 블로킹/논블로킹](https://inpa.tistory.com/entry/%F0%9F%91%A9%E2%80%8D%F0%9F%92%BB-%EB%8F%99%EA%B8%B0%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%B8%94%EB%A1%9C%ED%82%B9%EB%85%BC%EB%B8%94%EB%A1%9C%ED%82%B9-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A6%AC)

[동기와 비동기, 그리고 블럭과 넌블럭](https://musma.github.io/2019/04/17/blocking-and-synchronous.html)

[10분테코톡, 호기의 blocking VS non-blocking, sync VS async](https://www.youtube.com/watch?v=cmBFGSrHKnM)
